# 浏览历史记录功能使用指南

## 功能概述

本扩展新增了**自动浏览记录功能**，可以在您浏览网页时自动记录访问的页面信息，方便后续查看和管理。

## 功能特点

- ✅ **自动记录**：页面停留超过5秒自动保存
- ✅ **完整内容**：保存网页标题、URL、文本内容、favicon等
- ✅ **智能分组**：按日期自动分组（今天、昨天、本周、更早）
- ✅ **搜索功能**：支持按标题、URL、域名搜索
- ✅ **数据导出**：可导出为JSON格式
- ✅ **隐私保护**：所有数据存储在本地，不上传服务器

## 使用步骤

### 1. 启用功能

1. 点击浏览器工具栏中的扩展图标
2. 点击右上角的"选项"或直接右键扩展图标选择"选项"
3. 在设置页面中，勾选 **"启用浏览记录功能（停留5秒自动记录网页内容）"**
4. 点击 **"保存"** 按钮

### 2. 查看历史记录

方式一：
1. 在设置页面点击 **"📖 查看浏览历史记录"** 链接

方式二：
1. 在浏览器地址栏输入：`chrome-extension://[扩展ID]/history.html`

### 3. 管理记录

在历史记录页面，您可以：

- **搜索记录**：在顶部搜索框输入关键词，即时筛选
- **访问网页**：点击记录标题或"访问"按钮在新标签页打开
- **删除单条**：点击记录下方的"删除"按钮
- **导出数据**：点击顶部"导出数据"按钮，下载JSON文件
- **清空所有**：点击"清空所有记录"按钮（需确认）

## 工作原理

### 记录触发条件

- 页面必须处于**可见状态**（当前激活的标签页）
- 累计停留时间达到 **5秒**
- 同一标签页的同一URL只记录一次（刷新后会重新记录）

### 记录的数据

每条记录包含：
```json
{
  "id": 1729512345678,           // 记录ID（时间戳）
  "url": "https://example.com",  // 页面URL
  "title": "页面标题",            // 页面标题
  "favicon": "https://...",      // 网站图标
  "content": "页面文本内容...",   // 完整文本
  "visitTime": 1729512345678,    // 访问时间
  "domain": "example.com",       // 域名
  "duration": 930,               // 停留时长（秒）
  "lastUpdateTime": 1729512875678  // 最后更新时间
}
```

### 停留时长记录

- **自动计时**：页面在前台可见时自动计时
- **智能暂停**：切换到其他标签页时暂停计时
- **定期保存**：每30秒自动保存一次当前时长
- **累加时长**：同一页面多次查看会累加总时长

### 存储方案

- 使用 **IndexedDB** 存储数据
- 存储空间：取决于浏览器配额（通常几百MB到几GB）
- 所有数据存储在本地，完全离线可用

## 隐私说明

1. **本地存储**：所有数据仅存储在您的浏览器本地
2. **不上传**：扩展不会向任何服务器上传您的浏览记录
3. **完全控制**：您可以随时删除单条或全部记录
4. **可关闭**：随时在设置中关闭此功能

## 注意事项

1. **性能影响**：功能运行在后台，对性能影响极小
2. **存储空间**：长期使用会占用一定存储空间，建议定期清理
3. **隐私浏览**：在隐身模式下，此功能不会工作
4. **敏感网站**：如不希望记录某些网站，可以临时关闭功能

## 常见问题

### Q: 为什么某些页面没有被记录？

A: 可能原因：
- 功能未启用
- 页面停留时间不足5秒
- 页面不在可见状态（切换到其他标签页）
- 浏览器隐身模式

### Q: 如何备份我的浏览记录？

A: 在历史记录页面点击"导出数据"按钮，将数据保存为JSON文件。

### Q: 记录会占用多少空间？

A: 单条记录约1-10KB，具体取决于网页内容长度。1000条记录约1-10MB。

### Q: 可以导入之前导出的数据吗？

A: 当前版本暂不支持导入功能，后续版本会添加。

### Q: 如何完全清除所有数据？

A: 在历史记录页面点击"清空所有记录"按钮，或在Chrome设置中清除扩展数据。

## 技术支持

如有问题或建议，请在Chrome商店页面反馈。

