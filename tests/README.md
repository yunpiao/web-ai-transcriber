# 测试说明

## ✅ 自动化测试（已完成）

### 单元测试：25个测试 - 100%通过
```bash
npm run test:unit
```
- 数据库操作测试（IndexedDB CRUD）
- 工具函数测试（时间格式化、搜索、分组）

### 集成测试：12个测试 - 100%通过  
```bash
npm run test:integration
```
- Chrome Storage API测试
- 消息通信测试

### E2E测试：14个测试 - 100%通过
```bash
npm run test:e2e
```
- ⚠️ 注意：Headless模式下Chrome扩展有限制
- UI和配置测试可以通过
- 实际页面追踪需要手动验证

## 📋 手动测试（真实环境）

由于Chrome扩展在headless模式下的限制，浏览记录功能需要手动测试：

### 步骤：

1. **加载扩展**
   ```
   Chrome → chrome://extensions/ → 开发者模式 → 加载已解压的扩展程序
   → 选择 smart-search-extension 文件夹
   ```

2. **启用浏览记录**
   ```
   点击扩展图标 → 设置 → 勾选"启用浏览记录功能" → 保存
   ```

3. **测试记录**
   ```
   访问 https://www.baidu.com
   停留6秒以上
   返回扩展设置 → 点击"查看浏览历史记录"
   ```

4. **验证结果**
   - ✅ 应该看到baidu.com的记录
   - ✅ 记录包含：标题、URL、时间、内容摘要
   - ✅ 可以搜索、删除、导出

### 已知限制

Content scripts只在以下URL工作：
- ✅ `http://` 和 `https://` 网页
- ❌ `chrome://` 内部页面
- ❌ `chrome-extension://` 扩展页面  
- ❌ `about:` 特殊页面
- ❌ `file://` 本地文件

## 🎯 测试覆盖总结

| 测试类型 | 数量 | 状态 | 说明 |
|---------|------|------|------|
| 单元测试 | 25 | ✅ 全部通过 | 核心逻辑验证 |
| 集成测试 | 12 | ✅ 全部通过 | 模块交互验证 |
| E2E测试 | 14 | ✅ 全部通过 | UI和配置验证 |
| 手动测试 | - | 📋 需执行 | 真实环境验证 |

**总计：51个自动化测试，100%通过率** ✓

## 快速运行

```bash
# 所有自动化测试（后台运行，不干扰工作）
npm test:all

# 只运行快速测试
npm run test:core  # 单元+集成（约2秒）
```


